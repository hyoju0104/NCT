<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>등록한 상품 목록</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/brand.css}">
</head>
<body>
<th:block th:insert="~{common/header::header}"></th:block>

<div class="brand-dashboard">
    <div class="dashboard-header">
        <div class="wide-container">
            <h1 class="dashboard-title">My Products</h1>
            <p class="dashboard-subtitle">등록된 제품을 관리하세요</p>
        </div>
    </div>

    <div class="wide-container">
        <div class="dashboard-actions">
            <div class="filter-section">
                <button class="filter-btn active">All</button>
                <button class="filter-btn">Available</button>
                <button class="filter-btn">Unavailable</button>
            </div>

            <a class="add-btn" th:href="@{/brand/item/write}">
                <i class="bi bi-plus-lg"></i>
                <span>Add Product</span>
            </a>
        </div>

        <!-- 카드 그리드 레이아웃 -->
        <div class="products-grid" th:if="${not #lists.isEmpty(itemList)}">
            <div class="product-card" th:each="item : ${itemList}" th:if="${item != null}">
                <div class="product-card-image">
                    <!-- 이미지가 있는 경우 -->
                    <img th:if="${item.imageUrl != null}" th:src="${item.imageUrl}" alt="상품 이미지">
                    <!-- 이미지가 없는 경우 -->
                    <div th:if="${item.imageUrl == null}" class="no-image">
                        <i class="bi bi-image"></i>
                    </div>

                    <div class="product-status" th:if="${item.statusItem != null}">
                        <span th:text="${item.statusItem}"></span>
                    </div>
                </div>

                <div class="product-card-content">
                    <div class="product-brand" th:text="${item.brand != null ? item.brand.name : '브랜드명'}"></div>
                    <h3 class="product-name">
                        <a th:href="@{'/brand/item/detail/' + ${item.id}}" th:text="${item.name}"></a>
                    </h3>
                    <div class="product-category" th:text="${item.category != null ? '#'+item.category : '#카테고리'}"></div>
                    <div class="product-date" th:text="${#temporals.format(item.createdAt, 'yyyy.MM.dd')}"></div>
                </div>

                <div class="product-card-actions">
                    <a th:href="@{'/brand/item/update/' + ${item.id}}" class="card-action edit-action">
                        <i class="bi bi-pencil"></i>
                    </a>
                    <button type="button" class="card-action delete-action" th:onclick="'deleteItem(' + ${item.id} + ')'">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 상품이 없을 때 -->
        <div class="empty-state" th:if="${#lists.isEmpty(itemList)}">
            <div class="empty-icon">
                <i class="bi bi-box"></i>
            </div>
            <h3 class="empty-title">등록된 상품이 없습니다</h3>
            <p class="empty-message">첫 번째 상품을 등록해보세요!</p>
            <a class="empty-action" th:href="@{/brand/item/write}">
                <i class="bi bi-plus-lg"></i> 상품 등록하기
            </a>
        </div>
    </div>
</div>

<!-- 삭제 폼은 숨겨두고 자바스크립트로 제출 -->
<form id="deleteForm" th:action="@{/brand/item/delete}" method="post" style="display: none;">
    <input type="hidden" id="deleteItemId" name="id" value="" />
</form>

<script>
    function deleteItem(itemId) {
        if (confirm('정말 삭제하시겠습니까?')) {
            document.getElementById('deleteItemId').value = itemId;
            document.getElementById('deleteForm').submit();
        }
    }

    // 필터 버튼 활성화 (실제 필터링은 백엔드에서 구현 필요)
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
        });
    });
</script>

</body>
</html>